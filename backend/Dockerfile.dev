FROM rust:1.83-slim-bookworm

WORKDIR /app

# Install build dependencies and cargo-watch
RUN apt-get update && apt-get install -y pkg-config libssl-dev && rm -rf /var/lib/apt/lists/*
RUN cargo install cargo-watch

ENV HOST=0.0.0.0
ENV PORT=8080
ENV RUST_LOG=debug

EXPOSE 8080

CMD ["cargo", "watch", "-x", "run"]
